<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">

    <!-- Î™®Î∞îÏùº ÌíÄÏä§ÌÅ¨Î¶∞ ÏÑ§Ï†ï -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-fullscreen">
    <meta name="theme-color" content="#000000">
    <meta name="format-detection" content="telephone=no">

    <!-- Android ÌíÄÏä§ÌÅ¨Î¶∞ ÏÑ§Ï†ï -->
    <meta name="full-screen" content="yes">
    <meta name="x5-fullscreen" content="true">
    <meta name="x5-page-mode" content="app">

    <!-- Ï∂îÍ∞Ä Î™®Î∞îÏùº ÏµúÏ†ÅÌôî -->
    <meta name="HandheldFriendly" content="true">
    <meta name="MobileOptimized" content="width">

    <!-- ÏïÑÏù¥ÏΩò -->
    <link rel="apple-touch-icon" href="ico.png">
    <link rel="icon" type="image/png" href="ico.png">

    <title>ÏûâÍ∏ÄÎ¶¨Ïâ¨ ÌÉÅÍµ¨ ÌóåÌÑ∞ J - English Ping Pong Hunter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        html {
            width: 100%;
            height: 100%;
            height: -webkit-fill-available;
            height: 100vh;
            height: 100dvh;
            overflow: hidden;
        }

        body {
            background: linear-gradient(to bottom, #87CEEB 0%, #E0F6FF 100%);
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
            min-height: 100vh;
            min-height: -webkit-fill-available;
            min-height: 100dvh;
            margin: 0;
            padding: 0;
            /* Safe Area Insets */
            padding-top: env(safe-area-inset-top, 0);
            padding-bottom: env(safe-area-inset-bottom, 0);
            padding-left: env(safe-area-inset-left, 0);
            padding-right: env(safe-area-inset-right, 0);
            touch-action: none;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: none;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #gameContainer {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8E8 50%, #7BB8D1 100%);
            overflow: hidden;
        }

        /* PC - Í≤åÏûÑÎã§Ïö¥ Ï†ÑÏ≤¥ÌôîÎ©¥ (16:9 ÎπÑÏú® Ïú†ÏßÄÌïòÎ©¥ÏÑú ÏµúÎåÄÌôî) */
        @media (min-width: 801px) {
            body {
                background: #000;
            }

            #gameContainer {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 100vw;
                height: 100vh;
                max-width: calc(100vh * 16 / 9);
                max-height: calc(100vw * 9 / 16);
                border: none;
                border-radius: 0;
                box-shadow: 0 0 50px rgba(0,0,0,0.5);
            }
        }

        /* Î™®Î∞îÏùº - ÏôÑÏ†Ñ Ï†ÑÏ≤¥ÌôîÎ©¥ */
        @media (max-width: 800px) {
            #gameContainer {
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                right: 0 !important;
                bottom: 0 !important;
                width: 100vw !important;
                height: 100vh !important;
                height: 100dvh !important;
                max-width: 100vw !important;
                max-height: 100vh !important;
                transform: none !important;
                border: none !important;
                border-radius: 0 !important;
                box-shadow: none !important;
                /* Safe Area aware positioning */
                padding-top: env(safe-area-inset-top, 0);
                padding-bottom: env(safe-area-inset-bottom, 0);
                padding-left: env(safe-area-inset-left, 0);
                padding-right: env(safe-area-inset-right, 0);
            }
        }

        /* ÏÑ∏Î°ú Î™®Îìú ÌöåÏ†Ñ ÏïàÎÇ¥ */
        #rotatePrompt {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.95);
            z-index: 9999;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            padding: 20px;
        }

        #rotatePrompt .rotate-icon {
            font-size: 80px;
            margin-bottom: 20px;
            animation: rotate 2s infinite ease-in-out;
        }

        @keyframes rotate {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(90deg); }
        }

        #rotatePrompt h2 {
            font-size: 24px;
            margin-bottom: 10px;
            color: #FFD700;
        }

        #rotatePrompt p {
            font-size: 16px;
            color: #FFFFFF;
        }

        /* Î™®Î∞îÏùº ÏÑ∏Î°ú Î™®ÎìúÏóêÏÑú ÌöåÏ†Ñ ÏïàÎÇ¥ ÌëúÏãú */
        @media (max-width: 800px) and (orientation: portrait) {
            #gameContainer {
                display: none !important;
            }
            #rotatePrompt {
                display: flex !important;
            }
        }

        /* Î™®Î∞îÏùº Í∞ÄÎ°ú Î™®ÎìúÏóêÏÑúÎäî Í≤åÏûÑ Ïª®ÌÖåÏù¥ÎÑà Î≥¥Ïù¥Í∏∞ */
        @media (max-width: 800px) and (orientation: landscape) {
            #gameContainer {
                display: block !important;
            }
            #rotatePrompt {
                display: none !important;
            }
        }

        #gameCanvas {
            width: 100%;
            height: 100%;
            display: block;
            touch-action: none;
        }

        #ui {
            position: absolute;
            top: 10px;
            left: 10px;
            pointer-events: none;
            z-index: 10;
            width: 320px;
            height: 95px;
            background: linear-gradient(135deg, rgba(255, 182, 193, 0.95) 0%, rgba(255, 218, 224, 0.95) 50%, rgba(255, 240, 245, 0.95) 100%);
            padding: 10px;
            border-radius: 20px;
            border: 4px solid #FFB6C1;
            box-shadow: 0 8px 20px rgba(255, 105, 180, 0.4),
                        0 0 0 2px #FFFFFF,
                        inset 0 2px 10px rgba(255, 255, 255, 0.6);
            display: flex;
            flex-direction: column;
            gap: 8px;
            overflow: visible;
        }

        #ui::before {
            content: '‚ú®';
            position: absolute;
            top: -8px;
            right: 15px;
            font-size: 20px;
            animation: sparkleUI 2s ease-in-out infinite;
        }

        #ui::after {
            content: 'üíñ';
            position: absolute;
            bottom: -8px;
            left: 15px;
            font-size: 18px;
            animation: heartbeat 1.5s ease-in-out infinite;
        }

        @keyframes sparkleUI {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.3) rotate(180deg); opacity: 0.7; }
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        #energyContainer {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        #hpBarBackground {
            width: 200px;
            height: 30px;
            background: linear-gradient(to bottom, #FFF0F5, #FFE4E1);
            border: 3px solid #FF69B4;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1),
                        0 2px 8px rgba(255, 105, 180, 0.3);
        }

        #hpBarFill {
            height: 100%;
            width: 100%;
            background: linear-gradient(to right, #FF69B4, #FFB6C1, #FFC0CB);
            transition: width 0.3s ease, background 0.3s ease;
            box-shadow: inset 0 2px 8px rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
        }

        #hpBarFill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        #hpText {
            color: #FF1493;
            font-weight: bold;
            font-size: 16px;
            min-width: 80px;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8),
                         0 0 10px rgba(255, 105, 180, 0.5);
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }

        #playerInfo {
            color: #FF1493;
            font-size: 14px;
            font-weight: bold;
            display: flex;
            flex-direction: column;
            gap: 5px;
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }

        #playerName {
            color: #FF1493;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8),
                         0 0 8px rgba(255, 105, 180, 0.4);
        }

        #playerScore {
            color: #FF69B4;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8),
                         0 0 8px rgba(255, 215, 0, 0.4);
        }

        #wordProgress {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, rgba(186, 218, 255, 0.95) 0%, rgba(224, 238, 255, 0.95) 50%, rgba(240, 248, 255, 0.95) 100%);
            padding: 10px;
            border-radius: 20px;
            border: 4px solid #87CEEB;
            box-shadow: 0 8px 20px rgba(135, 206, 235, 0.4),
                        0 0 0 2px #FFFFFF,
                        inset 0 2px 10px rgba(255, 255, 255, 0.6);
            color: #1E90FF;
            font-size: 14px;
            font-weight: bold;
            width: 320px;
            height: 95px;
            box-sizing: border-box;
            transition: all 0.3s;
            pointer-events: none;
            z-index: 10;
            display: flex;
            flex-direction: column;
            gap: 3px;
            align-items: flex-start;
            font-family: 'Comic Sans MS', cursive, sans-serif;
            position: relative;
            overflow: visible;
        }

        #wordProgress::before {
            content: 'üåü';
            position: absolute;
            top: -8px;
            left: 15px;
            font-size: 20px;
            animation: starTwinkle 2s ease-in-out infinite;
        }

        #wordProgress::after {
            content: 'üéÄ';
            position: absolute;
            bottom: -8px;
            right: 15px;
            font-size: 18px;
            animation: ribbonFloat 2.5s ease-in-out infinite;
        }

        @keyframes starTwinkle {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.3) rotate(180deg); opacity: 0.7; }
        }

        @keyframes ribbonFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-5px) rotate(10deg); }
        }

        /* ÌÄ¥Ï¶à/Î≥¥Ïä§ Î™®Îìú - Î™®Î∞îÏùºÏóêÏÑúÎäî ÏÉÅÎã® Ï§ëÏïôÏóê ÏûëÍ≤å ÌëúÏãú */
        #wordProgress.quiz-mode,
        #wordProgress.boss-mode {
            position: fixed !important;
            z-index: 5 !important;
            background: linear-gradient(135deg, rgba(255, 218, 224, 0.95) 0%, rgba(255, 182, 193, 0.95) 50%, rgba(255, 192, 203, 0.95) 100%) !important;
            border: 4px solid #FF69B4 !important;
            box-shadow: 0 8px 20px rgba(255, 105, 180, 0.5),
                        0 0 0 2px #FFFFFF,
                        inset 0 2px 10px rgba(255, 255, 255, 0.6) !important;
        }

        #wordProgress.quiz-mode::before,
        #wordProgress.boss-mode::before {
            content: 'üëë';
        }

        #wordProgress.quiz-mode::after,
        #wordProgress.boss-mode::after {
            content: 'üíù';
        }

        /* PCÏóêÏÑúÎäî Ïö∞Ï∏° ÏÉÅÎã® Ïú†ÏßÄ */
        @media (min-width: 801px) {
            #wordProgress.quiz-mode,
            #wordProgress.boss-mode {
                left: auto !important;
                right: 10px !important;
                top: 10px !important;
                bottom: auto !important;
                transform: none !important;
                max-width: 300px !important;
                text-align: left !important;
                font-size: 16px !important;
                padding: 10px 15px !important;
            }
        }

        /* Î™®Î∞îÏùºÏóêÏÑúÎäî ÏÉÅÎã® Ï§ëÏïôÏóê Ïª¥Ìå©Ìä∏ÌïòÍ≤å ÌëúÏãú */
        @media (max-width: 800px) {
            #wordProgress.quiz-mode,
            #wordProgress.boss-mode {
                left: 50% !important;
                right: auto !important;
                top: env(safe-area-inset-top, 5px) !important;
                bottom: auto !important;
                transform: translateX(-50%) !important;
                max-width: 90% !important;
                text-align: center !important;
                font-size: 12px !important;
                padding: 6px 10px !important;
                background: rgba(0, 0, 0, 0.85) !important;
                border: 2px solid #FFD700 !important;
                align-items: center !important;
            }

            /* Í∞ÄÎ°ú Î™®Îìú Î™®Î∞îÏùºÏóêÏÑú Îçî ÏûëÍ≤å */
            @media (orientation: landscape) {
                #wordProgress.quiz-mode,
                #wordProgress.boss-mode {
                    font-size: 11px !important;
                    padding: 4px 8px !important;
                    max-width: 250px !important;
                }
            }
        }

        #stageDisplay {
            color: #FF1493;
            font-size: 14px;
            margin-bottom: 3px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8),
                         0 0 10px rgba(255, 105, 180, 0.5);
        }

        #targetWord {
            color: #FF69B4;
            font-size: 16px;
            margin-bottom: 3px;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8),
                         0 0 10px rgba(255, 215, 0, 0.4);
        }

        #collectedLetters {
            color: #9370DB;
            font-size: 16px;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8),
                         0 0 8px rgba(147, 112, 219, 0.4);
        }

        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.5);
            background: rgba(0, 0, 0, 0.9);
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            color: white;
            display: none;
            z-index: 100;
        }

        #gameOver h2 {
            font-size: 36px;
            margin-bottom: 20px;
            color: #FF4444;
        }

        #gameOver.success h2 {
            color: #00FF00;
        }

        #gameOver p {
            font-size: 20px;
            margin-bottom: 30px;
        }

        #gameOver button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            pointer-events: all;
            transition: all 0.3s;
        }

        #gameOver button:hover {
            background: #45a049;
            transform: scale(1.05);
        }

        /* Ïò§ÌîÑÎãù ÌÉÄÏù¥ÌãÄ ÌôîÎ©¥ */
        #titleScreen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 300;
            overflow: hidden;
        }

        #titleScreen::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background:
                radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 105, 180, 0.2) 0%, transparent 50%),
                radial-gradient(circle, rgba(255,255,255,0.08) 1px, transparent 1px);
            background-size: 100% 100%, 100% 100%, 50px 50px;
            animation: moveBackground 20s linear infinite;
        }

        @keyframes moveBackground {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        /* Îñ†Îã§ÎãàÎäî Î≥Ñ Ìö®Í≥º */
        #titleScreen::after {
            content: '‚ú®';
            position: absolute;
            font-size: 30px;
            animation: floatingStar 5s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes floatingStar {
            0%, 100% {
                top: 10%;
                left: 15%;
                opacity: 0.5;
                transform: scale(0.8) rotate(0deg);
            }
            25% {
                top: 20%;
                left: 25%;
                opacity: 1;
                transform: scale(1.2) rotate(90deg);
            }
            50% {
                top: 15%;
                left: 20%;
                opacity: 0.7;
                transform: scale(1) rotate(180deg);
            }
            75% {
                top: 25%;
                left: 10%;
                opacity: 0.9;
                transform: scale(1.1) rotate(270deg);
            }
        }

        .title-container {
            position: relative;
            text-align: center;
            z-index: 1;
            animation: fadeInScale 1.5s ease-out;
        }

        @keyframes fadeInScale {
            0% {
                opacity: 0;
                transform: scale(0.4);
            }
            100% {
                opacity: 1;
                transform: scale(0.5);
            }
        }

        .title-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 250px;
            height: 250px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.3) 0%, transparent 70%);
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.8; }
        }

        .main-title {
            position: relative;
            font-size: 72px;
            font-weight: bold;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .title-eng {
            font-size: clamp(14px, 3.6vw, 38px);
            color: #FFD700;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.8),
                         3px 3px 6px rgba(0, 0, 0, 0.8);
            letter-spacing: clamp(1px, 0.4vw, 6px);
            animation: glow 2s ease-in-out infinite;
            word-break: keep-all;
            white-space: nowrap;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 3px 3px 6px rgba(0, 0, 0, 0.8); }
            50% { text-shadow: 0 0 40px rgba(255, 215, 0, 1), 3px 3px 6px rgba(0, 0, 0, 0.8); }
        }

        .title-main {
            font-size: clamp(26px, 5.6vw, 67px);
            background: linear-gradient(45deg, #fff, #BA55D3, #FF69B4, #FFD700);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 4px 4px 8px rgba(0, 0, 0, 0.5);
            animation: gradientMove 3s ease infinite;
            letter-spacing: clamp(0px, 0.3vw, 4px);
            word-break: keep-all;
            white-space: nowrap;
        }

        @keyframes gradientMove {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .title-j {
            font-size: clamp(38px, 7.2vw, 96px);
            color: #FF69B4;
            text-shadow: 0 0 30px rgba(255, 105, 180, 0.8),
                         5px 5px 10px rgba(0, 0, 0, 0.8);
            animation: bounce 1.5s ease-in-out infinite;
            word-break: keep-all;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .title-subtitle {
            font-size: clamp(11px, 2.4vw, 22px);
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            margin-bottom: 24px;
            letter-spacing: clamp(0px, 0.2vw, 2px);
            word-break: keep-all;
            white-space: nowrap;
        }

        .title-sparkles {
            font-size: 38px;
            margin-bottom: 32px;
            display: flex;
            justify-content: center;
            gap: 24px;
        }

        .title-sparkles span {
            display: inline-block;
            animation: sparkle 1.5s ease-in-out infinite;
        }

        .title-sparkles span:nth-child(1) { animation-delay: 0s; }
        .title-sparkles span:nth-child(2) { animation-delay: 0.2s; }
        .title-sparkles span:nth-child(3) { animation-delay: 0.4s; }
        .title-sparkles span:nth-child(4) { animation-delay: 0.6s; }

        @keyframes sparkle {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.3) rotate(180deg); opacity: 0.7; }
        }

        .title-start-btn {
            position: relative;
            background: linear-gradient(45deg, #FF69B4, #BA55D3);
            border: 3px solid #FFD700;
            color: white;
            font-size: 26px;
            font-weight: bold;
            padding: 16px 48px;
            border-radius: 40px;
            cursor: pointer;
            transition: all 0.3s;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.6),
                        0 8px 20px rgba(0, 0, 0, 0.5);
            animation: buttonPulse 2s ease-in-out infinite;
        }

        @keyframes buttonPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 30px rgba(255, 215, 0, 0.6), 0 8px 20px rgba(0, 0, 0, 0.5); }
            50% { transform: scale(1.05); box-shadow: 0 0 50px rgba(255, 215, 0, 1), 0 12px 25px rgba(0, 0, 0, 0.6); }
        }

        .title-start-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 50px rgba(255, 215, 0, 1),
                        0 12px 30px rgba(0, 0, 0, 0.7);
        }

        .title-start-btn:active {
            transform: scale(0.95);
        }

        .btn-text {
            position: relative;
            z-index: 2;
            letter-spacing: 3px;
        }

        .btn-glow {
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
            animation: slideGlow 3s ease-in-out infinite;
        }

        @keyframes slideGlow {
            0% { left: -100%; }
            50%, 100% { left: 100%; }
        }

        .title-description {
            font-size: clamp(9px, 1.8vw, 16px);
            color: rgba(255, 255, 255, 0.95);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            margin-bottom: 20px;
            font-style: italic;
            letter-spacing: clamp(0px, 0.15vw, 1px);
            word-break: keep-all;
            white-space: nowrap;
        }

        .title-hint {
            margin-top: 12px;
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            animation: blink 2s ease-in-out infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        .title-credit {
            margin-top: 32px;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
        }

        /* Îñ†Îã§ÎãàÎäî ÏöîÏÜåÎì§ */
        .floating-elements {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .float-emoji {
            position: absolute;
            font-size: 40px;
            opacity: 0.4;
            animation: floatAround 8s ease-in-out infinite;
        }

        @keyframes floatAround {
            0%, 100% {
                transform: translate(0, 0) rotate(0deg) scale(1);
                opacity: 0.4;
            }
            25% {
                transform: translate(20px, -30px) rotate(90deg) scale(1.2);
                opacity: 0.6;
            }
            50% {
                transform: translate(-10px, -50px) rotate(180deg) scale(0.9);
                opacity: 0.3;
            }
            75% {
                transform: translate(-25px, -20px) rotate(270deg) scale(1.1);
                opacity: 0.5;
            }
        }

        /* Î™®Î∞îÏùº ÏµúÏ†ÅÌôî */
        @media (max-width: 800px) {
            #titleScreen {
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
                align-items: flex-start;
                padding-top: 40px;
            }

            .title-container {
                padding: 15px;
                max-width: 100vw;
                width: 100%;
                box-sizing: border-box;
            }

            .main-title {
                font-size: 36px;
                gap: 5px;
            }

            .title-eng {
                letter-spacing: 0px;
                font-size: clamp(13px, 3.2vw, 22px);
            }

            .title-main {
                letter-spacing: 0px;
                font-size: clamp(22px, 4.8vw, 38px);
            }

            .title-j {
                font-size: clamp(30px, 6.4vw, 54px);
            }

            .title-subtitle {
                font-size: 10px;
                letter-spacing: 0px;
                margin-bottom: 12px;
            }

            .title-sparkles {
                font-size: 22px;
                gap: 10px;
                margin-bottom: 16px;
            }

            .title-start-btn {
                font-size: 14px;
                padding: 9px 22px;
                border-width: 2px;
            }

            .title-credit {
                font-size: 9px;
                margin-top: 20px;
                margin-bottom: 24px;
            }

            .title-glow {
                width: 125px;
                height: 125px;
            }

            .title-description {
                font-size: 9px;
                margin-bottom: 12px;
                letter-spacing: 0px;
            }

            .title-hint {
                font-size: 8px;
                margin-top: 8px;
            }

            .float-emoji {
                font-size: 26px;
            }
        }

        /* ÏûëÏùÄ Î™®Î∞îÏùº (ÏÑ∏Î°ú Î™®Îìú) */
        @media (max-width: 500px) {
            #titleScreen {
                padding-top: 15px;
            }

            .title-container {
                padding: 5px;
                transform: scale(0.45);
            }

            .main-title {
                font-size: 24px;
                gap: 2px;
            }

            .title-eng {
                letter-spacing: 0px;
                font-size: clamp(10px, 2.4vw, 16px);
            }

            .title-main {
                letter-spacing: 0px;
                font-size: clamp(16px, 3.8vw, 28px);
            }

            .title-j {
                font-size: clamp(22px, 4.8vw, 38px);
            }

            .title-subtitle {
                font-size: 8px;
                letter-spacing: 0px;
                margin-bottom: 6px;
            }

            .title-sparkles {
                font-size: 16px;
                gap: 4px;
                margin-bottom: 10px;
            }

            .title-start-btn {
                font-size: 11px;
                padding: 6px 16px;
                border-width: 2px;
            }

            .title-credit {
                font-size: 6px;
                margin-top: 10px;
                margin-bottom: 15px;
            }

            .title-glow {
                width: 75px;
                height: 75px;
            }

            #titleScreen::after {
                font-size: 16px;
            }

            .title-description {
                font-size: 7px;
                margin-bottom: 6px;
                letter-spacing: 0px;
            }

            .title-hint {
                font-size: 5px;
                margin-top: 4px;
            }

            .float-emoji {
                font-size: 18px;
            }
        }

        /* Í∞ÄÎ°ú Î™®Îìú Î™®Î∞îÏùº */
        @media (max-width: 900px) and (orientation: landscape) {
            .title-container {
                padding: 10px;
                transform: scale(0.425);
            }

            .main-title {
                margin-bottom: 10px;
            }

            .title-subtitle {
                margin-bottom: 15px;
            }

            .title-sparkles {
                margin-bottom: 20px;
            }

            .title-credit {
                margin-top: 20px;
            }

            .title-description {
                font-size: 14px;
                margin-bottom: 12px;
            }

            .title-hint {
                font-size: 11px;
                margin-top: 8px;
            }

            .float-emoji {
                font-size: 26px;
            }
        }

        #startScreen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            z-index: 200;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding: 20px;
        }

        #startScreen h1 {
            font-size: clamp(12px, 2.5vw, 24px);
            margin-bottom: 10px;
            color: #FFD700;
            text-shadow: 1.5px 1.5px 3px rgba(0,0,0,0.5);
        }

        #startScreen p {
            font-size: clamp(7px, 1.25vw, 9px);
            margin-bottom: 5px;
            text-align: center;
            max-width: 90%;
        }

        #startScreen button {
            margin-top: 15px;
            margin-bottom: 15px;
            background: #4CAF50;
            color: white;
            border: none;
            padding: clamp(6px, 1vw, 10px) clamp(12.5px, 2vw, 20px);
            font-size: clamp(9px, 1.5vw, 12px);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        #startScreen button:hover {
            background: #45a049;
            transform: scale(1.05);
        }

        .controls {
            margin-top: 10px;
            font-size: clamp(6px, 1vw, 8px);
            color: #FFD700;
            max-width: 90%;
        }

        /* PC/Î™®Î∞îÏùº Ï†ÑÏö© ÌëúÏãú */
        .mobile-only {
            display: none;
        }

        @media (max-width: 800px), (hover: none) {
            .pc-only {
                display: none;
            }
            .mobile-only {
                display: block;
            }
        }

        /* Î™®Î∞îÏùº Ï°∞Ïù¥Ïä§Ìã± */
        #mobileControls {
            position: absolute !important;
            top: auto !important;
            bottom: 0px !important;
            left: 0;
            right: 0;
            display: none;
            justify-content: space-between;
            align-items: flex-end;
            padding: 0 20px;
            padding-bottom: 10px;
            pointer-events: none;
            z-index: 50;
        }

        @media (max-width: 800px), (hover: none) {
            #mobileControls {
                display: flex;
            }
        }

        .joystick-container {
            width: 150px;
            height: 150px;
            position: relative;
            pointer-events: all;
        }

        .joystick-base {
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            border: 3px solid rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            position: absolute;
        }

        .joystick-stick {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.8);
            border: 3px solid rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.1s;
        }

        /* Î™®Î∞îÏùº Ïï°ÏÖò Î≤ÑÌäº Ïª®ÌÖåÏù¥ÎÑà */
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: flex-end;  /* Ïò§Î•∏Ï™Ω ÎÅù Ï†ïÎ†¨ */
            pointer-events: all;
        }

        /* Ïï°ÏÖò Î≤ÑÌäº (Ïã†Í≤Ä, ÌÉÅÍµ¨Í≥µ) */
        .action-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 4px solid rgba(255, 255, 255, 0.8);
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 32px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
        }

        .action-btn:active {
            transform: scale(0.9);
            background: rgba(255, 255, 255, 0.3);
        }

        .action-btn .btn-label {
            font-size: 10px;
            color: white;
            font-weight: bold;
            margin-top: 2px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
        }

        /* Ïã†Í≤Ä Î≤ÑÌäº */
        #swordBtn {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.4), rgba(135, 206, 250, 0.4));
            border-color: #FFD700;
        }

        /* ÌÉÅÍµ¨Í≥µ Î≤ÑÌäº */
        #ballBtn {
            background: linear-gradient(135deg, rgba(255, 165, 0, 0.4), rgba(255, 215, 0, 0.4));
            border-color: #FFA500;
        }

        #characterBtn {
            background: linear-gradient(135deg, rgba(147, 112, 219, 0.4), rgba(186, 85, 211, 0.4));
            border-color: #9370DB;
        }

        /* Î≤ÑÌäº Ïà®ÍπÄ ÏÉÅÌÉú */
        .action-btn.hidden {
            display: none;
        }

        /* Î™®Î∞îÏùº Í∞ÄÎ°ú ÌôîÎ©¥ ÏµúÏ†ÅÌôî - Ï†ÑÏ≤¥ÌôîÎ©¥ */
        @media (max-width: 800px) and (orientation: landscape) {
            body {
                padding: 0 !important;
            }

            #gameContainer {
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                right: 0 !important;
                bottom: 0 !important;
                width: 100vw !important;
                height: 100vh !important;
                height: 100dvh !important;
                padding: 0 !important;
                padding-left: env(safe-area-inset-left, 0) !important;
                padding-right: env(safe-area-inset-right, 0) !important;
            }

            #startScreen h1 {
                font-size: 12px;
            }

            #startScreen p {
                font-size: 5.5px;
                padding: 0 5px;
                margin-bottom: 1.5px;
            }

            #startScreen button {
                padding: 5px 10px;
                font-size: 8px;
                margin-top: 5px;
            }

            .controls {
                font-size: 5px;
                margin-top: 4px;
            }

            #mobileControls {
                bottom: 0px !important;
                padding: 0 env(safe-area-inset-left, 10px) env(safe-area-inset-bottom, 10px) env(safe-area-inset-right, 10px);
            }

            .joystick-container {
                width: 90px;
                height: 90px;
            }

            .joystick-stick {
                width: 35px;
                height: 35px;
            }

            .action-btn {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }

            .action-btn .btn-label {
                font-size: 8px;
            }

            /* ÏûëÏùÄ ÌôîÎ©¥ÏóêÏÑúÎäî Î≤ÑÌäº ÌÅ¨Í∏∞ Ï°∞Ï†ï */
            .action-btn {
                width: 60px;
                height: 60px;
            }

            #energyContainer {
                padding: 3px;
                gap: 2px;
                margin-left: env(safe-area-inset-left, 0);
            }

            .energyHeart {
                width: 18px;
                height: 18px;
            }

            #wordProgress {
                padding: 5px 8px;
                font-size: 12px;
                margin-right: env(safe-area-inset-right, 0);
            }

            #stageDisplay {
                font-size: 12px !important;
            }

            #targetWord {
                font-size: 11px !important;
            }

            #collectedLetters {
                font-size: 10px !important;
            }

            #gameOver {
                padding: 20px 15px;
                transform: translate(-50%, -50%) scale(0.5);
            }

            #gameOver h2 {
                font-size: 22px;
            }

            #gameOver p {
                font-size: 13px;
                margin-bottom: 15px;
            }

            #gameOver button {
                padding: 10px 20px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <!-- ÏÑ∏Î°ú Î™®Îìú ÌöåÏ†Ñ ÏïàÎÇ¥ -->
    <div id="rotatePrompt">
        <div class="rotate-icon">üì±</div>
        <h2>ÌôîÎ©¥ÏùÑ ÌöåÏ†ÑÌï¥Ï£ºÏÑ∏Ïöî</h2>
        <p>Ïù¥ Í≤åÏûÑÏùÄ Í∞ÄÎ°ú Î™®ÎìúÏóê ÏµúÏ†ÅÌôîÎêòÏñ¥ ÏûàÏäµÎãàÎã§.</p>
        <p>Í∏∞Í∏∞Î•º Í∞ÄÎ°úÎ°ú ÎèåÎ†§ÏÑú ÌîåÎ†àÏù¥Ìï¥Ï£ºÏÑ∏Ïöî!</p>
    </div>

    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>

        <div id="ui">
            <div id="energyContainer">
                <div id="hpBarBackground">
                    <div id="hpBarFill"></div>
                </div>
                <div id="hpText">HP: 10/10</div>
            </div>
            <div id="playerInfo">
                <div id="playerName">üë§ ÏßÄÏú®</div>
                <div id="playerScore">‚≠ê Ï†êÏàò: 0</div>
            </div>
        </div>

        <div id="wordProgress">
            <div id="stageDisplay">Stage 1/20</div>
            <div id="targetWord">Î™©Ìëú: ???</div>
            <div id="collectedLetters">ÏàòÏßë: </div>
        </div>


        <div id="gameOver">
            <h2>Í≤åÏûÑ Ïò§Î≤Ñ!</h2>
            <p id="gameOverMessage"></p>
            <button onclick="restartGame()">Îã§Ïãú ÏãúÏûë</button>
        </div>

        <!-- Î™®Î∞îÏùº Ï°∞Ïù¥Ïä§Ìã± -->
        <div id="mobileControls">
            <div class="joystick-container" id="joystickContainer">
                <div class="joystick-base"></div>
                <div class="joystick-stick" id="joystickStick"></div>
            </div>
            <div class="action-buttons">
                <button id="characterBtn" class="action-btn">
                    <span>üë•</span>
                    <div class="btn-label">Ï∫êÎ¶≠ÌÑ∞ Ï≤¥Ïù∏ÏßÄ</div>
                </button>
                <button id="swordBtn" class="action-btn">
                    <span>‚öîÔ∏è</span>
                    <div class="btn-label">Í≥µÍ≤©</div>
                </button>
                <button id="ballBtn" class="action-btn hidden">
                    <span>üèì</span>
                    <div class="btn-label">ÌÉÅÍµ¨Í≥µ</div>
                </button>
            </div>
        </div>
    </div>

    <script>
        // ÌíÄÏä§ÌÅ¨Î¶∞ Ï†úÏñ¥ - iOSÏôÄ Android Î™®Îëê ÏßÄÏõê (Î™®Îì† ÌôîÎ©¥ÏóêÏÑú Í∞ÄÎ°ú=ÌíÄÏä§ÌÅ¨Î¶∞, ÏÑ∏Î°ú=ÏùºÎ∞ò)
        (function() {
            // iOS Í∞êÏßÄ
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
            // Android Í∞êÏßÄ
            const isAndroid = /Android/.test(navigator.userAgent);
            // Î™®Î∞îÏùº Ïó¨Î∂Ä ÌôïÏù∏
            const isMobile = isIOS || isAndroid;

            if (isMobile) {
                let isHandlingOrientation = false;

                // ÌôîÎ©¥ Î∞©Ìñ• Í∞êÏßÄ Î∞è ÌíÄÏä§ÌÅ¨Î¶∞ Ï≤òÎ¶¨
                function handleOrientation() {
                    if (isHandlingOrientation) return;
                    isHandlingOrientation = true;

                    // Í∞ÄÎ°ú Î™®ÎìúÏù∏ÏßÄ ÌôïÏù∏ - Îã§ÏñëÌïú Î∞©Î≤ïÏúºÎ°ú Ï≤¥ÌÅ¨
                    const isLandscape = window.innerWidth > window.innerHeight ||
                                       screen.orientation?.type?.includes('landscape') ||
                                       window.orientation === 90 ||
                                       window.orientation === -90;

                    console.log('ÌôîÎ©¥ Î∞©Ìñ•:', isLandscape ? 'Í∞ÄÎ°ú' : 'ÏÑ∏Î°ú');

                    if (isLandscape) {
                        // Í∞ÄÎ°ú Î™®Îìú: ÌíÄÏä§ÌÅ¨Î¶∞ ÏöîÏ≤≠
                        requestFullscreen();
                    } else {
                        // ÏÑ∏Î°ú Î™®Îìú: ÌíÄÏä§ÌÅ¨Î¶∞ Ìï¥Ï†ú
                        exitFullscreen();
                    }

                    setTimeout(() => {
                        isHandlingOrientation = false;
                    }, 200);
                }

                // ÌíÄÏä§ÌÅ¨Î¶∞ ÏöîÏ≤≠ Ìï®Ïàò (ÌÅ¨Î°úÏä§ Î∏åÎùºÏö∞Ï†Ä ÏßÄÏõê)
                function requestFullscreen() {
                    const elem = document.documentElement;

                    // Ïù¥ÎØ∏ ÌíÄÏä§ÌÅ¨Î¶∞Ïù¥Î©¥ Î¶¨ÌÑ¥
                    if (document.fullscreenElement ||
                        document.webkitFullscreenElement ||
                        document.mozFullScreenElement ||
                        document.msFullscreenElement) {
                        console.log('Ïù¥ÎØ∏ ÌíÄÏä§ÌÅ¨Î¶∞ ÏÉÅÌÉú');
                        applyFullscreenStyles();
                        return;
                    }

                    console.log('ÌíÄÏä§ÌÅ¨Î¶∞ ÏöîÏ≤≠ ÏãúÏûë');

                    // Îã§ÏñëÌïú Î∏åÎùºÏö∞Ï†Ä API ÏãúÎèÑ
                    try {
                        if (elem.requestFullscreen) {
                            elem.requestFullscreen().then(() => {
                                console.log('ÌíÄÏä§ÌÅ¨Î¶∞ ÏÑ±Í≥µ (standard)');
                                applyFullscreenStyles();
                            }).catch(err => {
                                console.log('ÌíÄÏä§ÌÅ¨Î¶∞ ÏöîÏ≤≠ Ïã§Ìå® (standard):', err.message);
                                applyFullscreenStyles(); // Ïã§Ìå®Ìï¥ÎèÑ Ïä§ÌÉÄÏùº Ï†ÅÏö©
                            });
                        } else if (elem.webkitRequestFullscreen) { // iOS Safari, Chrome
                            elem.webkitRequestFullscreen();
                            console.log('ÌíÄÏä§ÌÅ¨Î¶∞ ÏöîÏ≤≠ (webkit)');
                            setTimeout(applyFullscreenStyles, 100);
                        } else if (elem.webkitEnterFullscreen) { // iOS Íµ¨Ìòï
                            elem.webkitEnterFullscreen();
                            console.log('ÌíÄÏä§ÌÅ¨Î¶∞ ÏöîÏ≤≠ (webkit legacy)');
                            setTimeout(applyFullscreenStyles, 100);
                        } else if (elem.mozRequestFullScreen) { // Firefox
                            elem.mozRequestFullScreen();
                            console.log('ÌíÄÏä§ÌÅ¨Î¶∞ ÏöîÏ≤≠ (moz)');
                            setTimeout(applyFullscreenStyles, 100);
                        } else if (elem.msRequestFullscreen) { // IE/Edge
                            elem.msRequestFullscreen();
                            console.log('ÌíÄÏä§ÌÅ¨Î¶∞ ÏöîÏ≤≠ (ms)');
                            setTimeout(applyFullscreenStyles, 100);
                        } else {
                            // APIÍ∞Ä ÏóÜÏñ¥ÎèÑ CSSÎ°ú ÌíÄÏä§ÌÅ¨Î¶∞Ï≤òÎüº Î≥¥Ïù¥ÎèÑÎ°ù
                            console.log('ÌíÄÏä§ÌÅ¨Î¶∞ API ÏóÜÏùå, CSSÎ°ú ÎåÄÏ≤¥');
                            applyFullscreenStyles();
                        }
                    } catch (err) {
                        console.error('ÌíÄÏä§ÌÅ¨Î¶∞ ÏöîÏ≤≠ Ï§ë ÏóêÎü¨:', err);
                        applyFullscreenStyles(); // ÏóêÎü¨ Î∞úÏÉùÌï¥ÎèÑ Ïä§ÌÉÄÏùº Ï†ÅÏö©
                    }

                    // iOSÏùò Í≤ΩÏö∞ viewport Î©îÌÉÄ ÌÉúÍ∑∏ ÎèôÏ†Å Ï°∞Ï†ï
                    if (isIOS) {
                        const viewport = document.querySelector('meta[name=viewport]');
                        if (viewport) {
                            viewport.setAttribute('content',
                                'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover');
                        }

                        // iOSÏóêÏÑú Ï£ºÏÜåÏ∞Ω Ïà®Í∏∞Í∏∞ (Ïä§ÌÅ¨Î°§ Ìä∏Î¶≠)
                        setTimeout(() => {
                            window.scrollTo(0, 1);
                        }, 100);
                    }
                }

                // ÌíÄÏä§ÌÅ¨Î¶∞ Ìï¥Ï†ú Ìï®Ïàò (ÌÅ¨Î°úÏä§ Î∏åÎùºÏö∞Ï†Ä ÏßÄÏõê)
                function exitFullscreen() {
                    // ÌíÄÏä§ÌÅ¨Î¶∞Ïù¥ ÏïÑÎãàÎ©¥ Î¶¨ÌÑ¥
                    if (!document.fullscreenElement &&
                        !document.webkitFullscreenElement &&
                        !document.mozFullScreenElement &&
                        !document.msFullscreenElement) {
                        console.log('Ïù¥ÎØ∏ ÌíÄÏä§ÌÅ¨Î¶∞ ÏïÑÎãò');
                        removeFullscreenStyles();
                        return;
                    }

                    console.log('ÌíÄÏä§ÌÅ¨Î¶∞ Ìï¥Ï†ú ÏãúÏûë');

                    // Îã§ÏñëÌïú Î∏åÎùºÏö∞Ï†Ä API ÏãúÎèÑ
                    try {
                        if (document.exitFullscreen) {
                            document.exitFullscreen().then(() => {
                                console.log('ÌíÄÏä§ÌÅ¨Î¶∞ Ìï¥Ï†ú ÏÑ±Í≥µ');
                                removeFullscreenStyles();
                            }).catch(err => {
                                console.log('ÌíÄÏä§ÌÅ¨Î¶∞ Ìï¥Ï†ú Ïã§Ìå®:', err.message);
                                removeFullscreenStyles();
                            });
                        } else if (document.webkitExitFullscreen) {
                            document.webkitExitFullscreen();
                            setTimeout(removeFullscreenStyles, 100);
                        } else if (document.webkitCancelFullScreen) { // iOS Íµ¨Ìòï
                            document.webkitCancelFullScreen();
                            setTimeout(removeFullscreenStyles, 100);
                        } else if (document.mozCancelFullScreen) { // Firefox
                            document.mozCancelFullScreen();
                            setTimeout(removeFullscreenStyles, 100);
                        } else if (document.msExitFullscreen) { // IE/Edge
                            document.msExitFullscreen();
                            setTimeout(removeFullscreenStyles, 100);
                        } else {
                            removeFullscreenStyles();
                        }
                    } catch (err) {
                        console.error('ÌíÄÏä§ÌÅ¨Î¶∞ Ìï¥Ï†ú Ï§ë ÏóêÎü¨:', err);
                        removeFullscreenStyles();
                    }

                    // iOSÏùò Í≤ΩÏö∞ ÏõêÎûò viewportÎ°ú Î≥µÏõê
                    if (isIOS) {
                        const viewport = document.querySelector('meta[name=viewport]');
                        if (viewport) {
                            viewport.setAttribute('content',
                                'width=device-width, initial-scale=1.0, viewport-fit=cover');
                        }
                    }
                }

                // ÌíÄÏä§ÌÅ¨Î¶∞ Ïä§ÌÉÄÏùº Ï†ÅÏö© (CSSÎ°ú Í∞ïÏ†ú)
                function applyFullscreenStyles() {
                    document.body.style.position = 'fixed';
                    document.body.style.top = '0';
                    document.body.style.left = '0';
                    document.body.style.width = '100vw';
                    document.body.style.height = '100vh';
                    document.body.style.overflow = 'hidden';
                    document.body.style.backgroundColor = '#000';

                    // Î©îÌÉÄ ÌÖåÎßà ÏÉâÏÉÅ Î≥ÄÍ≤Ω
                    const themeColor = document.querySelector('meta[name=theme-color]');
                    if (themeColor) themeColor.setAttribute('content', '#000000');

                    console.log('ÌíÄÏä§ÌÅ¨Î¶∞ Ïä§ÌÉÄÏùº Ï†ÅÏö©');
                }

                // ÌíÄÏä§ÌÅ¨Î¶∞ Ïä§ÌÉÄÏùº Ï†úÍ±∞
                function removeFullscreenStyles() {
                    document.body.style.position = '';
                    document.body.style.top = '';
                    document.body.style.left = '';
                    document.body.style.width = '';
                    document.body.style.height = '';
                    document.body.style.overflow = '';

                    console.log('ÌíÄÏä§ÌÅ¨Î¶∞ Ïä§ÌÉÄÏùº Ï†úÍ±∞');
                }

                // ÌôîÎ©¥ Î∞©Ìñ• Î≥ÄÍ≤Ω Í∞êÏßÄ
                if (screen.orientation) {
                    // ÏµúÏã† API ÏÇ¨Ïö©
                    screen.orientation.addEventListener('change', function() {
                        console.log('Screen orientation change event');
                        setTimeout(handleOrientation, 100);
                    });
                }

                // orientationchange Ïù¥Î≤§Ìä∏ (Íµ¨Ìòï Í∏∞Í∏∞ Ìò∏ÌôòÏÑ±)
                window.addEventListener('orientationchange', function() {
                    console.log('Window orientationchange event');
                    setTimeout(handleOrientation, 100);
                });

                // resize Ïù¥Î≤§Ìä∏Î°úÎèÑ Í∞êÏßÄ (ÏùºÎ∂Ä Í∏∞Í∏∞ÏóêÏÑú ÌïÑÏöî)
                let resizeTimeout;
                window.addEventListener('resize', function() {
                    clearTimeout(resizeTimeout);
                    resizeTimeout = setTimeout(() => {
                        console.log('Window resize event');
                        handleOrientation();
                    }, 200);
                });

                // ÌíÄÏä§ÌÅ¨Î¶∞ ÏÉÅÌÉú Î≥ÄÍ≤Ω Í∞êÏßÄ - ÏÇ¨Ïö©ÏûêÍ∞Ä ÏàòÎèôÏúºÎ°ú Ìï¥Ï†úÌï† Í≤ΩÏö∞ ÎåÄÏùë
                document.addEventListener('fullscreenchange', function() {
                    const isFullscreen = !!document.fullscreenElement;
                    console.log('ÌíÄÏä§ÌÅ¨Î¶∞ ÏÉÅÌÉú Î≥ÄÍ≤Ω:', isFullscreen);

                    // Í∞ÄÎ°ú Î™®ÎìúÏù∏Îç∞ ÌíÄÏä§ÌÅ¨Î¶∞Ïù¥ Ìï¥Ï†úÎêòÏóàÎã§Î©¥ Îã§Ïãú ÏöîÏ≤≠
                    const isLandscape = window.innerWidth > window.innerHeight;
                    if (isLandscape && !isFullscreen) {
                        setTimeout(handleOrientation, 500);
                    }
                });

                document.addEventListener('webkitfullscreenchange', function() {
                    const isFullscreen = !!document.webkitFullscreenElement;
                    console.log('ÏõπÌÇ∑ ÌíÄÏä§ÌÅ¨Î¶∞ ÏÉÅÌÉú Î≥ÄÍ≤Ω:', isFullscreen);

                    const isLandscape = window.innerWidth > window.innerHeight;
                    if (isLandscape && !isFullscreen) {
                        setTimeout(handleOrientation, 500);
                    }
                });

                // Ï≤´ ÏÇ¨Ïö©Ïûê Ïù∏ÌÑ∞ÎûôÏÖò Ïãú ÌíÄÏä§ÌÅ¨Î¶∞ ÏãúÎèÑ
                let firstInteraction = true;
                const interactionEvents = ['touchstart', 'touchend', 'click', 'keydown', 'pointerdown'];

                function onFirstInteraction(e) {
                    if (firstInteraction) {
                        firstInteraction = false;
                        console.log('Ï≤´ ÏÇ¨Ïö©Ïûê Ïù∏ÌÑ∞ÎûôÏÖò Í∞êÏßÄ:', e.type);
                        handleOrientation();
                    }
                }

                // Î™®Îì† Ïù∏ÌÑ∞ÎûôÏÖò Ïù¥Î≤§Ìä∏Ïóê Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
                interactionEvents.forEach(event => {
                    document.addEventListener(event, onFirstInteraction, { once: true, passive: true });
                });

                // ÌéòÏù¥ÏßÄ Î°úÎìú ÌõÑ Ï¥àÍ∏∞ Î∞©Ìñ• ÌôïÏù∏
                window.addEventListener('load', function() {
                    console.log('Page loaded');
                    setTimeout(handleOrientation, 500);
                });

                // DOMContentLoaded Ïù¥Î≤§Ìä∏ÏóêÏÑúÎèÑ ÏãúÎèÑ
                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', function() {
                        console.log('DOM Content Loaded');
                        setTimeout(handleOrientation, 300);
                    });
                } else {
                    console.log('DOM already loaded');
                    setTimeout(handleOrientation, 300);
                }

                // Ï£ºÍ∏∞Ï†ÅÏúºÎ°ú ÌíÄÏä§ÌÅ¨Î¶∞ ÏÉÅÌÉú Ï≤¥ÌÅ¨ (Í∞ÄÎ°ú Î™®ÎìúÏùº ÎïåÎßå)
                setInterval(function() {
                    const isLandscape = window.innerWidth > window.innerHeight;
                    if (isLandscape) {
                        const isFullscreen = !!(document.fullscreenElement || document.webkitFullscreenElement);
                        if (!isFullscreen) {
                            console.log('Í∞ÄÎ°ú Î™®ÎìúÏù∏Îç∞ ÌíÄÏä§ÌÅ¨Î¶∞ ÏïÑÎãò, Ïû¨ÏãúÎèÑ');
                            applyFullscreenStyles(); // ÏµúÏÜåÌïú CSS Ïä§ÌÉÄÏùºÏùÄ Ï†ÅÏö©
                        }
                    }
                }, 3000); // 3Ï¥àÎßàÎã§ Ï≤¥ÌÅ¨
            }
        })();
    </script>

    <script src="characters-player.js?v=2"></script>
    <script src="characters-alphabet.js?v=2"></script>
    <script src="characters-boss.js?v=2"></script>
    <script src="words.js?v=2"></script>
    <script src="backgrounds.js?v=2"></script>
    <script src="story.js?v=3"></script>
    <script src="opening.js?v=2"></script>
    <script src="game.js?v=2"></script>
</body>
</html>
